{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"This documentation was last updated on ${DateTime} 04/14/22 It is still \"work in progress\", please refer to EGamma Twiki for the moment. . The charge of the E/gamma POG is to study, develop, characterize and validate the tools to identify and reconstruct electrons and photons using all the information available from the CMS detector, both for the offline analysis and for the online event selection (HLT). In particular, the E/gamma POG is the forum to discuss and coordinate the work on the development of: reconstruction algorithms for electron and photon objects starting from standalone ECAL reconstructed objects (e.g. !SuperClusters) standardized tools for electron and photon identification algorithms to distinguish photons from pi-zeros HLT algorithms for electrons and photons, and the optimization of trigger paths, rates and efficiencies techniques to measure trigger and reconstruction efficiencies using data","title":"e/\u03b3 POG"},{"location":"Contact/","text":"Join the team on Mattermost Email the team via cms-talk: cmstalk+egm@dovecotmta.cern.ch Send direct email to convenors: cms-phys-conveners-EGM@cern.ch Hypernews archive","title":"Contact us"},{"location":"EgammaSFJSON/","text":"Scale factors from JSONs The following is the guide to use EGamma JSON's for getting electron/photon scale factors in your analysis: First Step: Get the correctionlib library python3 -m pip install git+https://github.com/cms-nanoAOD/correctionlib.git Second Step: Get the EGamma JSONs You can either get them from the central POG repository or get them from CVMFS: /cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration (recommended). The cvmfs files are synced once a day. Electron JSON This JSON has 1 format Electron JSON Format: evaluator[ JSON Map Name %ENDCOLOR%].evaluate( year , Value Type , Working Point , eta , pt ) Format Guide: JSON to use JSON Map Name year Value Type Working Point eta pt electron.json \"UL-Electron-ID-SF\" \"2016preVFP\", \"2016postVFP\", \"2017\",\"2018\" \"sf\", \"sfup\",\"sfdown\" \"RecoBelow20\",\"RecoAbove20\",\"Veto\", \"Loose\", \"Medium\", \"Tight\", \"wp80iso\", \"wp80noiso\", \"wp90iso\", \"wp90noiso\" float value float value Python Example for electron JSON: Python Example to print a scale factor value from correctionlib import _core #Download the correct JSON files evaluator = _core.CorrectionSet.from_file('electron.json') #Reconstruction (pT< 20 GeV) Run-2 scale factor valsf= evaluator[\"UL-Electron-ID-SF\"].evaluate(\"2016postVFP\",\"sf\",\"RecoBelow20\",1.1, 15.0) print(\"sf is:\"+str(valsf)) #Reconstruction (pT> 20 GeV) Run-2 scale factor valsf= evaluator[\"UL-Electron-ID-SF\"].evaluate(\"2016postVFP\",\"sf\",\"RecoAbove20\",1.1, 25.0) print(\"sf is:\"+str(valsf)) Photon JSON This JSON has 2 formats Photon JSON Format 1 for ID SFs: evaluator[ JSON Map Name %ENDCOLOR%].evaluate( year , Value Type , Working Point , eta , pt ) Format Guide: JSON to use JSON Map Name year Value Type Working Point eta pt photon.json \"UL-Photon-ID-SF\" \"2016preVFP\", \"2016postVFP\", \"2017\",\"2018\" \"sf\", \"sfup\",\"sfdown\" \"Loose\", \"Medium\", \"Tight\", \"wp80\", \"wp90\" float value float value Photon JSON Format 2 for CSEV AND Pix veto SFs: evaluator[ JSON Map Name %ENDCOLOR%].evaluate( year , Value Type , Working Point , Bin ) Format Guide: JSON to use JSON Map Name year Value Type Working Point Bin photon.json \"UL-Photon-PixVeto-SF\", \"UL-Photon-CSEV-SF\" \"2016preVFP\", \"2016postVFP\", \"2017\",\"2018\" \"sf\", \"sfup\",\"sfdown\" \"Loose\", \"Medium\", \"Tight\", \"MVA\" \"EBInc\",\"EBHighR9\", \"EBLowR9\", \"EEInc\", \"EEHighR9\", \"EELowR9\" Python Example for photon JSON: Python Example to print a scale factor value for JSON Format 1 from correctionlib import _core #Download the correct JSON files from evaluator = _core.CorrectionSet.from_file('photon.json') valsyst= evaluator[\"UL-Photon-ID-SF\"].evaluate(\"2016postVFP\",\"sfup\",\"Medium\",1.1, 34.0) print(\"sfup is:\"+str(valsyst)) Python Example to print a scale factor value for JSON Format 2 from correctionlib import _core #Download the correct JSON files from evaluator = _core.CorrectionSet.from_file('photon.json') valsf= evaluator[\"UL-Photon-CSEV-SF\"].evaluate(\"2016postVFP\",\"sf\",\"Loose\",\"EBInc\") print(\"sf is:\"+str(valsf)) Link To development repo: https://github.com/cms-egamma/ScaleFactorsJSON The merging with common CMS repo can be monitored here: https://gitlab.cern.ch/cms-nanoAOD/jsonpog-integration/-/merge_requests/37","title":"JSONs"},{"location":"EgammaSFJSON/#scale-factors-from-jsons","text":"The following is the guide to use EGamma JSON's for getting electron/photon scale factors in your analysis:","title":"Scale factors from JSONs"},{"location":"EgammaSFJSON/#first-step-get-the-correctionlib-library","text":"python3 -m pip install git+https://github.com/cms-nanoAOD/correctionlib.git","title":"First Step: Get the correctionlib library"},{"location":"EgammaSFJSON/#second-step-get-the-egamma-jsons","text":"You can either get them from the central POG repository or get them from CVMFS: /cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration (recommended). The cvmfs files are synced once a day.","title":"Second Step: Get the EGamma JSONs"},{"location":"EgammaSFJSON/#electron-json","text":"This JSON has 1 format","title":"Electron JSON"},{"location":"EgammaSFJSON/#electron-json-format","text":"evaluator[ JSON Map Name %ENDCOLOR%].evaluate( year , Value Type , Working Point , eta , pt ) Format Guide: JSON to use JSON Map Name year Value Type Working Point eta pt electron.json \"UL-Electron-ID-SF\" \"2016preVFP\", \"2016postVFP\", \"2017\",\"2018\" \"sf\", \"sfup\",\"sfdown\" \"RecoBelow20\",\"RecoAbove20\",\"Veto\", \"Loose\", \"Medium\", \"Tight\", \"wp80iso\", \"wp80noiso\", \"wp90iso\", \"wp90noiso\" float value float value","title":"Electron JSON Format:"},{"location":"EgammaSFJSON/#python-example-for-electron-json","text":"Python Example to print a scale factor value from correctionlib import _core #Download the correct JSON files evaluator = _core.CorrectionSet.from_file('electron.json') #Reconstruction (pT< 20 GeV) Run-2 scale factor valsf= evaluator[\"UL-Electron-ID-SF\"].evaluate(\"2016postVFP\",\"sf\",\"RecoBelow20\",1.1, 15.0) print(\"sf is:\"+str(valsf)) #Reconstruction (pT> 20 GeV) Run-2 scale factor valsf= evaluator[\"UL-Electron-ID-SF\"].evaluate(\"2016postVFP\",\"sf\",\"RecoAbove20\",1.1, 25.0) print(\"sf is:\"+str(valsf))","title":"Python Example for electron JSON:"},{"location":"EgammaSFJSON/#photon-json","text":"This JSON has 2 formats","title":"Photon JSON"},{"location":"EgammaSFJSON/#photon-json-format-1-for-id-sfs","text":"evaluator[ JSON Map Name %ENDCOLOR%].evaluate( year , Value Type , Working Point , eta , pt ) Format Guide: JSON to use JSON Map Name year Value Type Working Point eta pt photon.json \"UL-Photon-ID-SF\" \"2016preVFP\", \"2016postVFP\", \"2017\",\"2018\" \"sf\", \"sfup\",\"sfdown\" \"Loose\", \"Medium\", \"Tight\", \"wp80\", \"wp90\" float value float value","title":"Photon JSON Format 1 for ID SFs:"},{"location":"EgammaSFJSON/#photon-json-format-2-for-csev-and-pix-veto-sfs","text":"evaluator[ JSON Map Name %ENDCOLOR%].evaluate( year , Value Type , Working Point , Bin ) Format Guide: JSON to use JSON Map Name year Value Type Working Point Bin photon.json \"UL-Photon-PixVeto-SF\", \"UL-Photon-CSEV-SF\" \"2016preVFP\", \"2016postVFP\", \"2017\",\"2018\" \"sf\", \"sfup\",\"sfdown\" \"Loose\", \"Medium\", \"Tight\", \"MVA\" \"EBInc\",\"EBHighR9\", \"EBLowR9\", \"EEInc\", \"EEHighR9\", \"EELowR9\"","title":"Photon JSON Format 2 for CSEV AND Pix veto SFs:"},{"location":"EgammaSFJSON/#python-example-for-photon-json","text":"Python Example to print a scale factor value for JSON Format 1 from correctionlib import _core #Download the correct JSON files from evaluator = _core.CorrectionSet.from_file('photon.json') valsyst= evaluator[\"UL-Photon-ID-SF\"].evaluate(\"2016postVFP\",\"sfup\",\"Medium\",1.1, 34.0) print(\"sfup is:\"+str(valsyst)) Python Example to print a scale factor value for JSON Format 2 from correctionlib import _core #Download the correct JSON files from evaluator = _core.CorrectionSet.from_file('photon.json') valsf= evaluator[\"UL-Photon-CSEV-SF\"].evaluate(\"2016postVFP\",\"sf\",\"Loose\",\"EBInc\") print(\"sf is:\"+str(valsf))","title":"Python Example for photon JSON:"},{"location":"EgammaSFJSON/#link-to-development-repo-httpsgithubcomcms-egammascalefactorsjson","text":"","title":"Link To development repo: https://github.com/cms-egamma/ScaleFactorsJSON"},{"location":"EgammaSFJSON/#the-merging-with-common-cms-repo-can-be-monitored-here","text":"https://gitlab.cern.ch/cms-nanoAOD/jsonpog-integration/-/merge_requests/37","title":"The merging with common CMS repo can be monitored here:"},{"location":"FAQs/","text":"Here we have compiled the list of frequently asked questions 1) Why we don't provide trigger scale factors? Different analyses use diffrent trigger combinations as per requirements. On top that, even if two analyses use the same trigger, they may use different ID working points. It is difficult to provide scale factors for all the potential trigger+ID combinations. Therefore, we have decided not to provide a scale factor, but we will provide all the support to anyone who wants to measure the trigger scale factors for their analysis. Right from the tag-and-probe package to ntuples, we assist analyzers at each step. We maintain a list of the all the approved trigger scale factors here: EgHLTScaleFactorMeasurements","title":"FAQs"},{"location":"PhysicsResults/","text":"CMS Egamma Results Public Results Analysis Document Public twiki lumi used ECM year * Performance of electron and photon reconstruction in Run 2 with the CMS experiment* CMS-DP-2020-037 Twiki 13 TeV Run-2 Redefinition of Electron and Photon identification variables for Run-3 in the CMS Experiment CMS DPS-2020/034 Twiki 14 TeV Run-3 Single and Double Electron trigger Efficiencies using the full Run 2 dataset CMS DPS-2020/016 Twiki 13 TeV Run-2 Performance of Electron and Photonreconstruction in the 2017 Legacy dataset of the CMS Experiment CMS DPS-2020/024 - 13 TeV 2017 CMS ECAL Timing Resolution Performance with Run 2 data CMS DPS-2019/021 Twiki 35.9+45.2 fb-1 13 TeV 2016+2017 Dielectron event display from 2018 CMS data for the ICHEP 2018 Conference CMS DPS-2018/043 - 13 TeV 2018 Electron and Photon performance in CMS with the data sample collected in 2016-17-18 at 13 TeV for the ICHEP 2018 Conference CMS DPS-2018/041 - 13 TeV 2016+17+18 Electron trigger performance in CMS with the full 2016 and 2017 data samples CMS DPS-2018/030 Twiki 36 + 42 fb-1 13 TeV 2016+2017 Electron and Photon performance in CMS with the full 2017 data sample and additional 2016 highlights for the CALOR 2018 Conference CMS DPS-2018/017 - 36 + 42 fb-1 13 TeV 2016+2017 Electron and photon performance in CMS with the full 2016 data sample CMS DPS-2017/004 - 36 fb-1 13 TeV 2016 Electron and photon performance in CMS with first 12.9/fb of 2016 data CMS DPS-2016/049 - 12.9 fb-1 13 TeV 2016 Electron performance using first data collected by CMS in 2016 CMS DPS-2016/026 - 0.6 fb-1 13 TeV 2016 Electron and Photon performance using data collected by CMS at s = \u221a13 TeV and 25ns CMS DPS-2015/067 - 2.6 fb-1 13 TeV 2015 *Electron and Photon performance with 50ns Run II data at sqrt(s)=13 TeV* CMS DPS-2015/013 - 40 pb-1 13 TeV 2015 *Performance of electron reconstruction and selection with the CMS detector at sqrt(s)=8TeV* EGM-13-001 TWiki 19.6 fb-1 8 TeV 2014 *Performance of photon reconstruction and selection with the CMS detector at sqrt(s)=8TeV* EGM-14-001 - 19.6 fb-1 8 TeV 2014 Photon Performance Plots CMS DP-2013/010 TWiki 19.6 fb-1 8 TeV 2013 Electron Performance Plots CMS DP-2013/003 TWiki 19.6 fb-1 8 TeV 2013 Electron Reconstruction and Identification CMS DP-2010/032 - \\<35 pb-1 7 TeV 2010 Di-Electron resonances and Mass Spectra CMS DP-2010/017 TWiki \\<35 pb-1 7 TeV 2010 Notes, PAS and papers *EGM-17-001 *: Electron and photon reconstruction and identification withthe CMS experiment at the CERN LHC *EGM-18-001 *: Reconstruction of signal amplitudes in the CMS electromagnetic calorimeter in the presence of overlapping proton-proton interactions *EGM-10-003 *: Electromagnetic calorimeter calibration with 7 TeV data *EGM-10-005 *: Photon reconstruction and identification at sqrt(s) = 7 TeV *CMS-NOTE-2010-012 *: Electromagnetic calorimeter commissioning and first results with 7 TeV data *EGM-10-001 *: Electromagnetic physics objects commissioning with first LHC data Additional material Draft of final version plots for Jpsi, W and Z to electrons mass approved 2 June 2010 (for CMS) EGMApprovedPlots_2Jun2010_Final.ppt Draft of final version plots for Jpsi, W and Z to electrons mass approved 2 June 2010 (public version) EGMApprovedPlotsPublic_2Jun2010_Final.ppt","title":"Physics Results"},{"location":"PhysicsResults/#cms-egamma-results","text":"","title":"CMS Egamma Results"},{"location":"PhysicsResults/#public-results","text":"Analysis Document Public twiki lumi used ECM year * Performance of electron and photon reconstruction in Run 2 with the CMS experiment* CMS-DP-2020-037 Twiki 13 TeV Run-2 Redefinition of Electron and Photon identification variables for Run-3 in the CMS Experiment CMS DPS-2020/034 Twiki 14 TeV Run-3 Single and Double Electron trigger Efficiencies using the full Run 2 dataset CMS DPS-2020/016 Twiki 13 TeV Run-2 Performance of Electron and Photonreconstruction in the 2017 Legacy dataset of the CMS Experiment CMS DPS-2020/024 - 13 TeV 2017 CMS ECAL Timing Resolution Performance with Run 2 data CMS DPS-2019/021 Twiki 35.9+45.2 fb-1 13 TeV 2016+2017 Dielectron event display from 2018 CMS data for the ICHEP 2018 Conference CMS DPS-2018/043 - 13 TeV 2018 Electron and Photon performance in CMS with the data sample collected in 2016-17-18 at 13 TeV for the ICHEP 2018 Conference CMS DPS-2018/041 - 13 TeV 2016+17+18 Electron trigger performance in CMS with the full 2016 and 2017 data samples CMS DPS-2018/030 Twiki 36 + 42 fb-1 13 TeV 2016+2017 Electron and Photon performance in CMS with the full 2017 data sample and additional 2016 highlights for the CALOR 2018 Conference CMS DPS-2018/017 - 36 + 42 fb-1 13 TeV 2016+2017 Electron and photon performance in CMS with the full 2016 data sample CMS DPS-2017/004 - 36 fb-1 13 TeV 2016 Electron and photon performance in CMS with first 12.9/fb of 2016 data CMS DPS-2016/049 - 12.9 fb-1 13 TeV 2016 Electron performance using first data collected by CMS in 2016 CMS DPS-2016/026 - 0.6 fb-1 13 TeV 2016 Electron and Photon performance using data collected by CMS at s = \u221a13 TeV and 25ns CMS DPS-2015/067 - 2.6 fb-1 13 TeV 2015 *Electron and Photon performance with 50ns Run II data at sqrt(s)=13 TeV* CMS DPS-2015/013 - 40 pb-1 13 TeV 2015 *Performance of electron reconstruction and selection with the CMS detector at sqrt(s)=8TeV* EGM-13-001 TWiki 19.6 fb-1 8 TeV 2014 *Performance of photon reconstruction and selection with the CMS detector at sqrt(s)=8TeV* EGM-14-001 - 19.6 fb-1 8 TeV 2014 Photon Performance Plots CMS DP-2013/010 TWiki 19.6 fb-1 8 TeV 2013 Electron Performance Plots CMS DP-2013/003 TWiki 19.6 fb-1 8 TeV 2013 Electron Reconstruction and Identification CMS DP-2010/032 - \\<35 pb-1 7 TeV 2010 Di-Electron resonances and Mass Spectra CMS DP-2010/017 TWiki \\<35 pb-1 7 TeV 2010","title":"Public Results"},{"location":"PhysicsResults/#notes-pas-and-papers","text":"*EGM-17-001 *: Electron and photon reconstruction and identification withthe CMS experiment at the CERN LHC *EGM-18-001 *: Reconstruction of signal amplitudes in the CMS electromagnetic calorimeter in the presence of overlapping proton-proton interactions *EGM-10-003 *: Electromagnetic calorimeter calibration with 7 TeV data *EGM-10-005 *: Photon reconstruction and identification at sqrt(s) = 7 TeV *CMS-NOTE-2010-012 *: Electromagnetic calorimeter commissioning and first results with 7 TeV data *EGM-10-001 *: Electromagnetic physics objects commissioning with first LHC data","title":"Notes, PAS and papers"},{"location":"PhysicsResults/#additional-material","text":"Draft of final version plots for Jpsi, W and Z to electrons mass approved 2 June 2010 (for CMS) EGMApprovedPlots_2Jun2010_Final.ppt Draft of final version plots for Jpsi, W and Z to electrons mass approved 2 June 2010 (public version) EGMApprovedPlotsPublic_2Jun2010_Final.ppt","title":"Additional material"},{"location":"Run2/","text":"Releases As far as we are aware, there is no dependence on the release used to analyse the data, only the release and conditions used to reconstruct that data. Running VID and scale & smearing counts as analysis here. As an example the 2016 legacy scale factors are valid for working in 80X, 94X and 102X releases. Further more, the reminiAODs do not alter the quantities of e/gamma objects, they only add additional information. Therefore there is no difference between running VID yourself on V1 MiniAOD or reading it directly in V2 miniAOD. So rest assured, the scale factors for a given data (2018, 2017, 2016 Legacy) are the same no matter what you do. Feel free to ask us for further clarification on hn-cms-egamma@cern.ch . E/gamma DataFormat We have now use the E/gamma MiniAODV2 format which embeds all the energy corrections and the IDs inside the pat::Electron/pat::Photon. Please see EgammaMiniAODV2 for more information. We provide tools to update the format with new IDs and energy corrections, please see EgammaPostRecoRecipes . This is probably the easier way to use E/gamma objects. E/gamma Trigger L1 Prefiring The darkening of the ECAL crystals causes the light reaching the photodetectors to become increasingly delayed. Due to the interaction of this effect with the trigger electronics, it is possible for a trigger tower to be assigned to the previous bunch crossing, with the likelihood of this happening increasing with increasing opacity of the crystal. This effect is was not corrected for and in 2016 and 2017 , it is possible for L1 ECAL trigger primatives corresponding to an object to end up in the previous bunch crossing. As there is unlikely to be anything in this event cababile of passing the HLT, the event is rejected. Even worse, due to CMS trigger rules, the L1 can not fire on two successive bunch crossings so even if there are other objects to trigger on at L1 in the correct bunch crossing, the event is rejected. This manifests itself as an event level trigger inefficiency and is not included in tag\\&probe measurements. There exists a preliminary recipe by Laurent Thomas and rest of the pre-firing team: L1ECALPrefiringWeightRecipe . Please be aware that the recipe is only guaranteed to work when there is only one prefirable object (ie |\u03b7|>2.0). The recipe may work with >=1 prefirable objects but this is strongly topology dependent. In this case you should definately check with the experts, do not blindly assume it works for this case. As this recipe is still preliminary, we & the l1 pre-firing group would greatly appreciate feedback. Selecting a Trigger Path The twiki EgHLTRunIISummary gives a complete listing of all E/gamma triggers (including cross triggers) for 2016, 2017 and 2018. It also gives some basic suggestions for the typical uses cases for electrons. The detailed selection of each trigger is summarised in EgHLTPathDetails (its a large twiki, can take a while to load). HLT Z vtx Scale Factor there is an allowed Z region for an electron to be in the HLT which is obtained by the online beamspot. There were problems in the begining of 2017, which means that the z region was too small and efficiency suffered. This can not be determined with Z->ee tag & probe as the tag & probe have the same zvtx. Care must be taken with e-mu tag and probe as this will include it as the muon triggers were not as effected for more details, please see this talk from the 07/02/18 EGM Meeting the MC efficiency is one so the efficiency of the online Z region cut in the HLT and the scale factor for MC are identical events selected using electron triggers which use pixel matching require an additional scale factor. As it is event level, it should be applied only once per event, no matter how many electrons were required to be triggered this only needs to be applied in 2017, 2016 & 2018 are fine these numbers are considered final by E/gamma (and are unchanged since last year) the 2018 number measured to be > 0.99976 and is taken to be 1.0 as a 0.02% inefficiency dwarfed by other efficiency systematics | Era | 2016 | 2017B | 2017C | 2017DEF | 2017BCDEF | 2018 | | SF | 1.0\u00b10.0 | 0.934\u00b10.005 | 0.992\u00b10.001 | 1.000 | 0.991\u00b10.001 | 1.0\u00b10.0 | E/gamma RECO Photon Scale Factors The scale factor to reconstruct a supercluster with H/E\\<0.5 is assumed to be 100% Electron Scale Factors This is the scale factor to get a GsfTrack once you have a supercluster with H/E\\<0.5. 2016 prompt .root here they are flat vs pt below GeV and above >80 GeV the systematic is increased by 1% 2016 legacy, E T \\< 20 GeV .root 2016 legacy, E T > 20 GeV .root https://indico.cern.ch/event/662761/contributions/2993714/attachments/1644305/2627487/0504_RECOSFs.pdf https://indico.cern.ch/event/697080/contributions/2986493/attachments/1641173/2621057/0427_RECOSFs.pdf 2017, E T \\< 20 GeV .root 2017, E T > 20 GeV .root Link to the presentation for 2017 Rereco SFs: https://indico.cern.ch/event/695160/contributions/2893558/attachments/1598949/2534169/0212_RECOSFs_update.pdf https://indico.cern.ch/event/697573/contributions/2887072/attachments/1596519/2529058/0207_RECOSFs.pdf 2018 .root note this has been slightly updated w.r.t to the old scale factor split into two bins, however the numbers are compatible with each other and no major change expected. Link to the presentation: https://indico.cern.ch/event/794628/contributions/3303043/attachments/1791305/2923400/RECOSFs_0208_update.pdf E/gamma IDs E/gamma maintains several IDs, both cut based and MVA. In terms of cut based, there is also the HEEP (high energy) ID which aimed to be a simple straighforward ID that is safe for high energy electrons. The HEEP ID for historical reasons operates on a different versioning than other cut based IDs. All these IDs are accessible as part of the pat::Electron/pat::Photon however depending on the miniAOD version you run over, you may need to run EgammaPostReco tools to embed it first. It is important to note due to the way our ID framework functions, if you find an ID in the pat::Electron/pat::Photon with the requested name, that ID will be the correct. So if you find the ID you are looking for, you should not worry that its an out of date version. More information can be found at EgammaIDRecipesRun2 Example accessing IDs We recommend using the E/gamma miniAOD V2 format which embeds all the IDs in the pat::Electron,pat::Photon which means if you know the name of the ID, you can access it straightforwardly like: pat::Electron::electronID(\"cutBasedElectronID-Fall17-94X-V1-tight\")==true //passes Fall17 V1 tight pat::Photon::photonID(\"cutBasedPhotonID-Fall17-94X-V1-tight\")==true //passes Fall17 V1 tight We try to have our IDs in a release so no PR is necessary. However for the latest and greatest ID, there will be a period of time where the ID has to be merged in via a PR. For each ID, the first CMSSW release where the ID is included is indidicated as \"release availiblity\". The miniAOD which has this ID embedded is also noted as \"miniAOD availiblity\". Electrons IDs: Spring16 (mva) & Summer16 (cut based) summary: tunned on 80X spring16/summer16 MC and prompt data release availiblity: CMSSW_9_4_0, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2016 (prompt and legacy) scale factors 2016 prompt: cutBasedElectronID-Summer16-80X-V1-veto cutBasedElectronID-Summer16-80X-V1-loose cutBasedElectronID-Summer16-80X-V1-medium cutBasedElectronID-Summer16-80X-V1-tight mvaEleID-Spring16-GeneralPurpose-V1-wp80 mvaEleID-Spring16-GeneralPurpose-V1-wp90 scale factors 2016 legacy: cutBasedElectronID-Summer16-80X-V1-loose cutBasedElectronID-Summer16-80X-V1-medium cutBasedElectronID-Summer16-80X-V1-tight mvaEleID-Spring16-GeneralPurpose-V1-wp80 mvaEleID-Spring16-GeneralPurpose-V1-wp90 Fall17v1 summary: ID was tuned on 92X MC, 2017 data and was made availible for Moriond2018 Analyises release availiblity: CMSSW_9_4_9, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2017 note we would suggest you use the Fall17v2 IDs as they give better signal vs background seperation but its fine to use these for 2017 if you prefer. You could also use them for 2018 but we would really prefer you use the Fall17v2. We do not plan to provide scale factors for these IDs for 2018 though so if you do have a good reason to use them, come talk to us. scale factors 2017: cutBasedElectronID-Fall17-94X-V1-loose cutBasedElectronID-Fall17-94X-V1-medium cutBasedElectronID-Fall17-94X-V1-tight cutBasedElectronID-Fall17-94X-V1-veto mvaEleID-Fall17-iso-V1-wp80 mvaEleID-Fall17-noIso-V1-wp80 mvaEleID-Fall17-iso-V1-wp90 mvaEleID-Fall17-noIso-V1-wp90 Fall17v2 summary: ID was tuned on 94X MC, 2017 data and offers improvements on the Fall17v1 IDs release availiblity: CMSSW_10_2_0 PRs: cms-egamma:EgammaID_949 (for 94X >= 949) miniAOD availiblity: 2018 v1 miniAOD recommended for: 2016, 2017, 2018 we consider these the best possible IDs right now with the best signal can use for 2016 if you want to use a consistent ID for all years scale factors 2016 (legacy): cutBasedElectronID-Fall17-94X-V2-loose cutBasedElectronID-Fall17-94X-V2-medium cutBasedElectronID-Fall17-94X-V2-tight mvaEleID-Fall17-iso-V2-wp80 mvaEleID-Fall17-iso-V2-wp90 mvaEleID-Fall17-noIso-V2-wp80 mvaEleID-Fall17-noIso-V2-wp90 scale factors 2017: cutBasedElectronID-Fall17-94X-V2-loose cutBasedElectronID-Fall17-94X-V2-medium cutBasedElectronID-Fall17-94X-V2-tight mvaEleID-Fall17-iso-V2-wp80 mvaEleID-Fall17-iso-V2-wp90 mvaEleID-Fall17-noIso-V2-wp80 mvaEleID-Fall17-noIso-V2-wp90 scales factors 2018: cutBasedElectronID-Fall17-94X-V2-loose cutBasedElectronID-Fall17-94X-V2-medium cutBasedElectronID-Fall17-94X-V2-tight mvaEleID-Fall17-iso-V2-wp80 mvaEleID-Fall17-iso-V2-wp90 mvaEleID-Fall17-noIso-V2-wp80 mvaEleID-Fall17-noIso-V2-wp90 HEEPV7.0 summary: a simple robust ID designed to be safe for high electrons. The Et evolution of this ID must be well described in the MC therefore this ID is designed so its scale factor is flat vs Et. As a result the HEEP differs in that it provides just a single number for the barrel and a single number for the endcap. release availibity: CMSSW_9_4_0, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2016 (prompt and legacy), 2017 scale factors: 2016 prompt: 0.971\u00b10.001 (stat) (EB), 0.983\u00b10.001 (stat) (EE) uncertainty: EB E T \\< 90 GeV: 1% else min(1+(E T -90)*0.0022)%,3%) uncertainty: EE E T \\< 90 GeV: 1% else min(1+(E T -90)*0.0143)%,4%) 2016 legacy: take from slide 10 of https://indico.cern.ch/event/831669/contributions/3485543/attachments/1871797/3084930/ApprovalSlides_EE_v3.pdf 2017 prompt: 0.967\u00b10.001 (stat) (EB), 0.973\u00b10.002 (stat) (EE) uncertainty: EB E T \\< 90 GeV: 1% else min(1+(E T -90)*0.0022)%,3%) uncertainty: EE E T \\< 90 GeV: 2% else min(1+(E T -90)*0.0143)%,5%) HEEPv7.0-2018Prompt There was a retune of HEEPv7.0 ID for 2018 due to HCAL data/MC disagreements. The cuts in EB remain same as HEEPv7.0, but there were some changes in cuts in EE. The H/E cut and EM+Had_depth1 isolation cut changed in 2018 for EE only. For more details, see 1) Decicated study by W. Fang etc al. https://indico.cern.ch/event/787315/contributions/3434898/attachments/1847223/3031172/HEEP_2019_0517_v3.pdf . In slide 16, the choice 2 was considered the final choice, and was used in Z'->EE search. 2) Z'->EE approval talk https://indico.cern.ch/event/831669/contributions/3485543/attachments/1871797/3084930/ApprovalSlides_EE_v3.pdf This ID is not centrally available in https://github.com/cms-sw/cmssw/tree/CMSSW_10_2_X/RecoEgamma/ElectronIdentification/python/Identification , which means that users need to manually apply this ID. Users can make use of individual cuts as described here https://twiki.cern.ch/twiki/bin/view/CMS/CutBasedElectronIdentificationRun2#Applying_Individual_Cuts_of_a_Se , so that the other cuts that did not change in 2018 can still be used from centrally available VID. For 2018 rereco (Autumn 18) the SF are the following, 0.969 +/- 0.000 (stat) (EB), and 0.984 +/- 0.001 (stat) (EE). The systematic uncertainty is same as 2017 prompt, as indicated in slide 15 of Z'->EE approval presentation, linked above. So, the following should be used uncertainty: EB E\\<sub style=\"background-color: transparent;\">T \\< 90 GeV: 1% else min(1+(E\\<sub style=\"background-color: transparent;\">T -90)*0.0022)%,3%) uncertainty: EE E\\<sub style=\"background-color: transparent;\">T \\< 90 GeV: 2% else min(1+(E\\<sub style=\"background-color: transparent;\">T -90)*0.0143)%,5%) For more details see here https://twiki.cern.ch/twiki/bin/view/CMS/HEEPElectronIdentificationRun2#Scale_Factor . As always, HEEP ID SF are just two numbers, one for EB and one for EE. Photon IDs: If you are using any of our photon IDs for high pT (>200 GeV) photons, then read this twiki for detailed EGM recommendations: https://twiki.cern.ch/twiki/bin/view/CMS/EGMPhotonIDHighPtPhotons Spring16 summary: tunned on 80X spring16 MC and prompt data release availiblity: CMSSW_9_4_0, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2016 (prompt and legacy) scale factors 2016 prompt: cutBasedPhotonID-Spring16-V2p2-loose cutBasedPhotonID-Spring16-V2p2-medium cutBasedPhotonID-Spring16-V2p2-tight mvaPhoID-Spring16-nonTrig-V1-wp90 scale factors 2016 legacy: cutBasedPhotonID-Spring16-V2p2-loose cutBasedPhotonID-Spring16-V2p2-medium cutBasedPhotonID-Spring16-V2p2-tight mvaPhoID-Spring16-nonTrig-V1-wp80 mvaPhoID-Spring16-nonTrig-V1-wp90 Fall17v1 summary: ID was tuned on 92X MC, 2017 data and was made availible for Moriond2018 Analyises release availiblity: CMSSW_9_4_9, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2017 note we would suggest you use the Fall17v2 IDs as they give better signal vs background seperation but its fine to use these for 2017 if you prefer. You could also use them for 2018 but we would really prefer you use the Fall17v2. We do not plan to provide scale factors for these IDs for 2018 though so if you do have a good reason to use them, come talk to us. scale factors 2017: cutBasedPhotonID-Fall17-94X-V1-loose cutBasedPhotonID-Fall17-94X-V1-medium cutBasedPhotonID-Fall17-94X-V1-tight mvaPhoID-RunIIFall17-v1p1-wp80 mvaPhoID-RunIIFall17-v1p1-wp90 Fall17v2 summary: ID was tuned on 94X MC, 2017 data and offers improvements on the Fall17v1 IDs release availiblity: CMSSW_10_2_10 (which is not out yet) miniAOD availiblity: none PRs: cms-egamma:EgammaID_949 (for 94X >= 949) currently RECO has decided not to allow backport to the official CMSSW due to release stability concerns PRs: cms-egamma:EgammaID_1023 (for 102X >= 1023) currently merged in CMSSW_10_2_X and should be in CMSSW_10_2_10 when availible recommended for: 2016, 2017, 2018 we consider these the best possible IDs right now with the best signal its a bit marginal gains for 2016 over the 2016 ID so we mainly recommend it out of consistency scale factors 2016: cutBasedPhotonID-Fall17-94X-V2-loose cutBasedPhotonID-Fall17-94X-V2-medium cutBasedPhotonID-Fall17-94X-V2-tight mvaPhoID-Fall17-iso-V2-wp80 mvaPhoID-Fall17-iso-V2-wp90 scale factors 2017: cutBasedPhotonID-Fall17-94X-V2-loose cutBasedPhotonID-Fall17-94X-V2-medium cutBasedPhotonID-Fall17-94X-V2-tight mvaPhoID-Fall17-iso-V2-wp80 mvaPhoID-Fall17-iso-V2-wp90 scale factors 2018: cutBasedPhotonID-Fall17-94X-V2-loose cutBasedPhotonID-Fall17-94X-V2-medium cutBasedPhotonID-Fall17-94X-V2-tight mvaPhoID-Fall17-iso-V2-wp80 mvaPhoID-Fall17-iso-V2-wp90 E/gamma Energy Corrections Electron and Photon Energy Regression Corrections The electron and photon energy corrections are applied by default to the object. 2016Legacy & Prompt uses the V1 or \"74X\" regression while 2017 and 2018 use a modified version of the V2 or \"80X\" regression. This modification is that the high pt ecal training is only used for saturated electrons and photons. Residual Scale & Smearing Corrections The data / MC energy rescale and resolution have a small residual miss match. Therefore we scale the data to the MC and the smear the MC to match the data resolution. This is known as scale & smearing corrections. The scale and smear corrected energy can be accessed inside the miniAOD object via pat::Electron::userFloat('ecalTrkEnergyPostCorr\"), pat::Photon::userFloat('ecalEnergyPostCorr'). Some analyses use the ECAL only energy of electrons and therefore use pat::Electron::userFloat('ecalEnergyPostCorr'). Currently, these final corrections are only availible for 2016 and 2017, although preliminary ones are now availible 2018 Preliminary Energy Correction To access the scale and smearings please see EgammaMiniAODV2#Energy_Scale_and_Smearing Recommendations on Combining Systematics between years What follows are some simple recommendations on correlating the systematics between the years which we feel are a resonable starting point. The method for deciding the correlation depends on whether the quantity is measured in its kinematic phase space or extrapolated its kinematic phase space. The systematic uncertainty of a measured value is dominated by biases associated with the measurement method. As long as the method remains the same, we can reasonably assume that the method bias will be the same each year. The systematic uncertainty of an extrapolated value is dominated by the modelling of that extrapolation by the Monte Carlo simulation and can change between years if new cuts, new variables or new detectors are introduced. We absolutely encourage feedback here and will update the recommendations based on this. trigger efficiency: uncertainties are negligible w.r.t to reco & ID unless there are bugs RECO efficiency: uncertainties are correlated between the years as they are measured with the same method due to the larger backgrounds, we assume the RECO uncertainties are uncorrelated w.r.t to the ID uncertainties ID efficiency 20 to 200 GeV (near the Z peak): small stat errors, systematics dominate. This is a measurement and given the method doesnt change, its 100% correlated between the years >200 GeV: extrapolation based on confidence of the Monte Carlo simulation capturing the energy evolution of the ID variables we decided 100% correlated between 2016 & 2017. A 50 GeV electron looks a lot like a 1 TeV electron pixel wise so any differences are already accounted for. Any energy disagrement would come from something else which is constant between the two years it is yet unclear if 2018 is correlated or uncorrelated due to the HCAL endcap upgrade UPDATE as of 14th Dec, 2020: Since most of the variables are ECAL related, we suggest to treat the ID systematics correlated between all the years unless there are strong points against it. conversion safe electron veto: as this is arguably an extrapolation, we uncorrelate 2016, 2017 and 2018 due to the different pixel detector / pixel running conditions between the years energy scale: the errors are: stat, systematic, gain stat: neglibible and can be ignored syst: a measurement, correlated between the years gain: the error on the gain category mostly coming from the statistics of each gain category electrons and therefore it can be taken to be uncorrelated between the years. Really only important for gain1 which are our highest energy electrons. Also helps that 2016 and 2017 have different energy regressions which may be modelled differently in MC so they really should be uncorrelated. energy resolution: the errors are correlated between the years as they are a measurement and the same method is used in all years Summary of available Egamma POG ntuples 2016 Rereco version: /*/Run2016*17Jul2018 / (legacy rereco) MC samples: /*/*RunIISummer16MiniAODv3 / egamma ntuples: /eos/cms/store/group/phys_egamma/soffi/TnP/ntuples_04162018-Legacy2016 Regression: PF/SC/Egamma 74X /74X/74X trained Scale and smearing: embedded in MiniAOD V2 JSON: Cert_271036-284044_13TeV_23Sep2016ReReco_Collisions16_JSON.txt 2017 Rereco version: /*/Run2017*31Mar2018 / MC samples: /*/*12Apr2018 / egamma ntuples: /eos/cms/store/group/phys_egamma/soffi/TnP/ntuples_01162018/Moriond18_V1 egamma ntuples with same tag but additional variables: /eos/cms/store/group/phys_egamma/micheli/TnP/ntuples_2017_20181116 Regression: PF/SC/Egamma 94X /74X/80X trained Scale and smearing: embedded in MiniAOD V2 JSON: Cert_294927-306462_13TeV_PromptReco_Collisions17_JSON.txt 2018 Rereco version: / /17Sep2018 (for A-C), promptReco (for D)/ MC samples: /*/*RunIIAutumn18DRPremix -102X_upgrade2018_realistic / egamma ntuples:/eos/cms/store/group/phys_egamma/swmukher/NtupleForRecoSF/Rereco2018Data_Autumn18MC_AOD Regression: PF/SC/Egamma 74X /74X/74X trained Scale and smearing: embedded in MiniAOD V2 JSON: Cert_314472-325175_13TeV_PromptReco_Collisions18_JSON.txt","title":"Recommendations"},{"location":"Run2/#releases","text":"As far as we are aware, there is no dependence on the release used to analyse the data, only the release and conditions used to reconstruct that data. Running VID and scale & smearing counts as analysis here. As an example the 2016 legacy scale factors are valid for working in 80X, 94X and 102X releases. Further more, the reminiAODs do not alter the quantities of e/gamma objects, they only add additional information. Therefore there is no difference between running VID yourself on V1 MiniAOD or reading it directly in V2 miniAOD. So rest assured, the scale factors for a given data (2018, 2017, 2016 Legacy) are the same no matter what you do. Feel free to ask us for further clarification on hn-cms-egamma@cern.ch .","title":"Releases"},{"location":"Run2/#egamma-dataformat","text":"We have now use the E/gamma MiniAODV2 format which embeds all the energy corrections and the IDs inside the pat::Electron/pat::Photon. Please see EgammaMiniAODV2 for more information. We provide tools to update the format with new IDs and energy corrections, please see EgammaPostRecoRecipes . This is probably the easier way to use E/gamma objects.","title":"E/gamma DataFormat"},{"location":"Run2/#egamma-trigger","text":"","title":"E/gamma Trigger"},{"location":"Run2/#l1-prefiring","text":"The darkening of the ECAL crystals causes the light reaching the photodetectors to become increasingly delayed. Due to the interaction of this effect with the trigger electronics, it is possible for a trigger tower to be assigned to the previous bunch crossing, with the likelihood of this happening increasing with increasing opacity of the crystal. This effect is was not corrected for and in 2016 and 2017 , it is possible for L1 ECAL trigger primatives corresponding to an object to end up in the previous bunch crossing. As there is unlikely to be anything in this event cababile of passing the HLT, the event is rejected. Even worse, due to CMS trigger rules, the L1 can not fire on two successive bunch crossings so even if there are other objects to trigger on at L1 in the correct bunch crossing, the event is rejected. This manifests itself as an event level trigger inefficiency and is not included in tag\\&probe measurements. There exists a preliminary recipe by Laurent Thomas and rest of the pre-firing team: L1ECALPrefiringWeightRecipe . Please be aware that the recipe is only guaranteed to work when there is only one prefirable object (ie |\u03b7|>2.0). The recipe may work with >=1 prefirable objects but this is strongly topology dependent. In this case you should definately check with the experts, do not blindly assume it works for this case. As this recipe is still preliminary, we & the l1 pre-firing group would greatly appreciate feedback.","title":"L1 Prefiring"},{"location":"Run2/#selecting-a-trigger-path","text":"The twiki EgHLTRunIISummary gives a complete listing of all E/gamma triggers (including cross triggers) for 2016, 2017 and 2018. It also gives some basic suggestions for the typical uses cases for electrons. The detailed selection of each trigger is summarised in EgHLTPathDetails (its a large twiki, can take a while to load).","title":"Selecting a Trigger Path"},{"location":"Run2/#hlt-zvtx-scale-factor","text":"there is an allowed Z region for an electron to be in the HLT which is obtained by the online beamspot. There were problems in the begining of 2017, which means that the z region was too small and efficiency suffered. This can not be determined with Z->ee tag & probe as the tag & probe have the same zvtx. Care must be taken with e-mu tag and probe as this will include it as the muon triggers were not as effected for more details, please see this talk from the 07/02/18 EGM Meeting the MC efficiency is one so the efficiency of the online Z region cut in the HLT and the scale factor for MC are identical events selected using electron triggers which use pixel matching require an additional scale factor. As it is event level, it should be applied only once per event, no matter how many electrons were required to be triggered this only needs to be applied in 2017, 2016 & 2018 are fine these numbers are considered final by E/gamma (and are unchanged since last year) the 2018 number measured to be > 0.99976 and is taken to be 1.0 as a 0.02% inefficiency dwarfed by other efficiency systematics | Era | 2016 | 2017B | 2017C | 2017DEF | 2017BCDEF | 2018 | | SF | 1.0\u00b10.0 | 0.934\u00b10.005 | 0.992\u00b10.001 | 1.000 | 0.991\u00b10.001 | 1.0\u00b10.0 |","title":"HLT Zvtx Scale Factor"},{"location":"Run2/#egamma-reco","text":"","title":"E/gamma RECO"},{"location":"Run2/#photon-scale-factors","text":"The scale factor to reconstruct a supercluster with H/E\\<0.5 is assumed to be 100%","title":"Photon Scale Factors"},{"location":"Run2/#electron-scale-factors","text":"This is the scale factor to get a GsfTrack once you have a supercluster with H/E\\<0.5. 2016 prompt .root here they are flat vs pt below GeV and above >80 GeV the systematic is increased by 1% 2016 legacy, E T \\< 20 GeV .root 2016 legacy, E T > 20 GeV .root https://indico.cern.ch/event/662761/contributions/2993714/attachments/1644305/2627487/0504_RECOSFs.pdf https://indico.cern.ch/event/697080/contributions/2986493/attachments/1641173/2621057/0427_RECOSFs.pdf 2017, E T \\< 20 GeV .root 2017, E T > 20 GeV .root Link to the presentation for 2017 Rereco SFs: https://indico.cern.ch/event/695160/contributions/2893558/attachments/1598949/2534169/0212_RECOSFs_update.pdf https://indico.cern.ch/event/697573/contributions/2887072/attachments/1596519/2529058/0207_RECOSFs.pdf 2018 .root note this has been slightly updated w.r.t to the old scale factor split into two bins, however the numbers are compatible with each other and no major change expected. Link to the presentation: https://indico.cern.ch/event/794628/contributions/3303043/attachments/1791305/2923400/RECOSFs_0208_update.pdf","title":"Electron Scale Factors"},{"location":"Run2/#egamma-ids","text":"E/gamma maintains several IDs, both cut based and MVA. In terms of cut based, there is also the HEEP (high energy) ID which aimed to be a simple straighforward ID that is safe for high energy electrons. The HEEP ID for historical reasons operates on a different versioning than other cut based IDs. All these IDs are accessible as part of the pat::Electron/pat::Photon however depending on the miniAOD version you run over, you may need to run EgammaPostReco tools to embed it first. It is important to note due to the way our ID framework functions, if you find an ID in the pat::Electron/pat::Photon with the requested name, that ID will be the correct. So if you find the ID you are looking for, you should not worry that its an out of date version. More information can be found at EgammaIDRecipesRun2","title":"E/gamma IDs"},{"location":"Run2/#example-accessing-ids","text":"We recommend using the E/gamma miniAOD V2 format which embeds all the IDs in the pat::Electron,pat::Photon which means if you know the name of the ID, you can access it straightforwardly like: pat::Electron::electronID(\"cutBasedElectronID-Fall17-94X-V1-tight\")==true //passes Fall17 V1 tight pat::Photon::photonID(\"cutBasedPhotonID-Fall17-94X-V1-tight\")==true //passes Fall17 V1 tight We try to have our IDs in a release so no PR is necessary. However for the latest and greatest ID, there will be a period of time where the ID has to be merged in via a PR. For each ID, the first CMSSW release where the ID is included is indidicated as \"release availiblity\". The miniAOD which has this ID embedded is also noted as \"miniAOD availiblity\".","title":"Example accessing IDs"},{"location":"Run2/#electrons-ids","text":"","title":"Electrons IDs:"},{"location":"Run2/#spring16-mva-summer16-cut-based","text":"summary: tunned on 80X spring16/summer16 MC and prompt data release availiblity: CMSSW_9_4_0, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2016 (prompt and legacy) scale factors 2016 prompt: cutBasedElectronID-Summer16-80X-V1-veto cutBasedElectronID-Summer16-80X-V1-loose cutBasedElectronID-Summer16-80X-V1-medium cutBasedElectronID-Summer16-80X-V1-tight mvaEleID-Spring16-GeneralPurpose-V1-wp80 mvaEleID-Spring16-GeneralPurpose-V1-wp90 scale factors 2016 legacy: cutBasedElectronID-Summer16-80X-V1-loose cutBasedElectronID-Summer16-80X-V1-medium cutBasedElectronID-Summer16-80X-V1-tight mvaEleID-Spring16-GeneralPurpose-V1-wp80 mvaEleID-Spring16-GeneralPurpose-V1-wp90","title":"Spring16 (mva) &amp; Summer16 (cut based)"},{"location":"Run2/#fall17v1","text":"summary: ID was tuned on 92X MC, 2017 data and was made availible for Moriond2018 Analyises release availiblity: CMSSW_9_4_9, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2017 note we would suggest you use the Fall17v2 IDs as they give better signal vs background seperation but its fine to use these for 2017 if you prefer. You could also use them for 2018 but we would really prefer you use the Fall17v2. We do not plan to provide scale factors for these IDs for 2018 though so if you do have a good reason to use them, come talk to us. scale factors 2017: cutBasedElectronID-Fall17-94X-V1-loose cutBasedElectronID-Fall17-94X-V1-medium cutBasedElectronID-Fall17-94X-V1-tight cutBasedElectronID-Fall17-94X-V1-veto mvaEleID-Fall17-iso-V1-wp80 mvaEleID-Fall17-noIso-V1-wp80 mvaEleID-Fall17-iso-V1-wp90 mvaEleID-Fall17-noIso-V1-wp90","title":"Fall17v1"},{"location":"Run2/#fall17v2","text":"summary: ID was tuned on 94X MC, 2017 data and offers improvements on the Fall17v1 IDs release availiblity: CMSSW_10_2_0 PRs: cms-egamma:EgammaID_949 (for 94X >= 949) miniAOD availiblity: 2018 v1 miniAOD recommended for: 2016, 2017, 2018 we consider these the best possible IDs right now with the best signal can use for 2016 if you want to use a consistent ID for all years scale factors 2016 (legacy): cutBasedElectronID-Fall17-94X-V2-loose cutBasedElectronID-Fall17-94X-V2-medium cutBasedElectronID-Fall17-94X-V2-tight mvaEleID-Fall17-iso-V2-wp80 mvaEleID-Fall17-iso-V2-wp90 mvaEleID-Fall17-noIso-V2-wp80 mvaEleID-Fall17-noIso-V2-wp90 scale factors 2017: cutBasedElectronID-Fall17-94X-V2-loose cutBasedElectronID-Fall17-94X-V2-medium cutBasedElectronID-Fall17-94X-V2-tight mvaEleID-Fall17-iso-V2-wp80 mvaEleID-Fall17-iso-V2-wp90 mvaEleID-Fall17-noIso-V2-wp80 mvaEleID-Fall17-noIso-V2-wp90 scales factors 2018: cutBasedElectronID-Fall17-94X-V2-loose cutBasedElectronID-Fall17-94X-V2-medium cutBasedElectronID-Fall17-94X-V2-tight mvaEleID-Fall17-iso-V2-wp80 mvaEleID-Fall17-iso-V2-wp90 mvaEleID-Fall17-noIso-V2-wp80 mvaEleID-Fall17-noIso-V2-wp90","title":"Fall17v2"},{"location":"Run2/#heepv70","text":"summary: a simple robust ID designed to be safe for high electrons. The Et evolution of this ID must be well described in the MC therefore this ID is designed so its scale factor is flat vs Et. As a result the HEEP differs in that it provides just a single number for the barrel and a single number for the endcap. release availibity: CMSSW_9_4_0, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2016 (prompt and legacy), 2017 scale factors: 2016 prompt: 0.971\u00b10.001 (stat) (EB), 0.983\u00b10.001 (stat) (EE) uncertainty: EB E T \\< 90 GeV: 1% else min(1+(E T -90)*0.0022)%,3%) uncertainty: EE E T \\< 90 GeV: 1% else min(1+(E T -90)*0.0143)%,4%) 2016 legacy: take from slide 10 of https://indico.cern.ch/event/831669/contributions/3485543/attachments/1871797/3084930/ApprovalSlides_EE_v3.pdf 2017 prompt: 0.967\u00b10.001 (stat) (EB), 0.973\u00b10.002 (stat) (EE) uncertainty: EB E T \\< 90 GeV: 1% else min(1+(E T -90)*0.0022)%,3%) uncertainty: EE E T \\< 90 GeV: 2% else min(1+(E T -90)*0.0143)%,5%)","title":"HEEPV7.0"},{"location":"Run2/#heepv70-2018prompt","text":"There was a retune of HEEPv7.0 ID for 2018 due to HCAL data/MC disagreements. The cuts in EB remain same as HEEPv7.0, but there were some changes in cuts in EE. The H/E cut and EM+Had_depth1 isolation cut changed in 2018 for EE only. For more details, see 1) Decicated study by W. Fang etc al. https://indico.cern.ch/event/787315/contributions/3434898/attachments/1847223/3031172/HEEP_2019_0517_v3.pdf . In slide 16, the choice 2 was considered the final choice, and was used in Z'->EE search. 2) Z'->EE approval talk https://indico.cern.ch/event/831669/contributions/3485543/attachments/1871797/3084930/ApprovalSlides_EE_v3.pdf This ID is not centrally available in https://github.com/cms-sw/cmssw/tree/CMSSW_10_2_X/RecoEgamma/ElectronIdentification/python/Identification , which means that users need to manually apply this ID. Users can make use of individual cuts as described here https://twiki.cern.ch/twiki/bin/view/CMS/CutBasedElectronIdentificationRun2#Applying_Individual_Cuts_of_a_Se , so that the other cuts that did not change in 2018 can still be used from centrally available VID. For 2018 rereco (Autumn 18) the SF are the following, 0.969 +/- 0.000 (stat) (EB), and 0.984 +/- 0.001 (stat) (EE). The systematic uncertainty is same as 2017 prompt, as indicated in slide 15 of Z'->EE approval presentation, linked above. So, the following should be used uncertainty: EB E\\<sub style=\"background-color: transparent;\">T \\< 90 GeV: 1% else min(1+(E\\<sub style=\"background-color: transparent;\">T -90)*0.0022)%,3%) uncertainty: EE E\\<sub style=\"background-color: transparent;\">T \\< 90 GeV: 2% else min(1+(E\\<sub style=\"background-color: transparent;\">T -90)*0.0143)%,5%) For more details see here https://twiki.cern.ch/twiki/bin/view/CMS/HEEPElectronIdentificationRun2#Scale_Factor . As always, HEEP ID SF are just two numbers, one for EB and one for EE.","title":"HEEPv7.0-2018Prompt"},{"location":"Run2/#photon-ids","text":"If you are using any of our photon IDs for high pT (>200 GeV) photons, then read this twiki for detailed EGM recommendations: https://twiki.cern.ch/twiki/bin/view/CMS/EGMPhotonIDHighPtPhotons","title":"Photon IDs:"},{"location":"Run2/#spring16","text":"summary: tunned on 80X spring16 MC and prompt data release availiblity: CMSSW_9_4_0, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2016 (prompt and legacy) scale factors 2016 prompt: cutBasedPhotonID-Spring16-V2p2-loose cutBasedPhotonID-Spring16-V2p2-medium cutBasedPhotonID-Spring16-V2p2-tight mvaPhoID-Spring16-nonTrig-V1-wp90 scale factors 2016 legacy: cutBasedPhotonID-Spring16-V2p2-loose cutBasedPhotonID-Spring16-V2p2-medium cutBasedPhotonID-Spring16-V2p2-tight mvaPhoID-Spring16-nonTrig-V1-wp80 mvaPhoID-Spring16-nonTrig-V1-wp90","title":"Spring16"},{"location":"Run2/#fall17v1_1","text":"summary: ID was tuned on 92X MC, 2017 data and was made availible for Moriond2018 Analyises release availiblity: CMSSW_9_4_9, CMSSW_10_2_0 miniAOD availiblity: 2016 v3 miniAOD, 2017 v2 miniAOD, 2018 v1 miniAOD recommended for: 2017 note we would suggest you use the Fall17v2 IDs as they give better signal vs background seperation but its fine to use these for 2017 if you prefer. You could also use them for 2018 but we would really prefer you use the Fall17v2. We do not plan to provide scale factors for these IDs for 2018 though so if you do have a good reason to use them, come talk to us. scale factors 2017: cutBasedPhotonID-Fall17-94X-V1-loose cutBasedPhotonID-Fall17-94X-V1-medium cutBasedPhotonID-Fall17-94X-V1-tight mvaPhoID-RunIIFall17-v1p1-wp80 mvaPhoID-RunIIFall17-v1p1-wp90","title":"Fall17v1"},{"location":"Run2/#fall17v2_1","text":"summary: ID was tuned on 94X MC, 2017 data and offers improvements on the Fall17v1 IDs release availiblity: CMSSW_10_2_10 (which is not out yet) miniAOD availiblity: none PRs: cms-egamma:EgammaID_949 (for 94X >= 949) currently RECO has decided not to allow backport to the official CMSSW due to release stability concerns PRs: cms-egamma:EgammaID_1023 (for 102X >= 1023) currently merged in CMSSW_10_2_X and should be in CMSSW_10_2_10 when availible recommended for: 2016, 2017, 2018 we consider these the best possible IDs right now with the best signal its a bit marginal gains for 2016 over the 2016 ID so we mainly recommend it out of consistency scale factors 2016: cutBasedPhotonID-Fall17-94X-V2-loose cutBasedPhotonID-Fall17-94X-V2-medium cutBasedPhotonID-Fall17-94X-V2-tight mvaPhoID-Fall17-iso-V2-wp80 mvaPhoID-Fall17-iso-V2-wp90 scale factors 2017: cutBasedPhotonID-Fall17-94X-V2-loose cutBasedPhotonID-Fall17-94X-V2-medium cutBasedPhotonID-Fall17-94X-V2-tight mvaPhoID-Fall17-iso-V2-wp80 mvaPhoID-Fall17-iso-V2-wp90 scale factors 2018: cutBasedPhotonID-Fall17-94X-V2-loose cutBasedPhotonID-Fall17-94X-V2-medium cutBasedPhotonID-Fall17-94X-V2-tight mvaPhoID-Fall17-iso-V2-wp80 mvaPhoID-Fall17-iso-V2-wp90","title":"Fall17v2"},{"location":"Run2/#egamma-energy-corrections","text":"","title":"E/gamma Energy Corrections"},{"location":"Run2/#electron-and-photon-energy-regression-corrections","text":"The electron and photon energy corrections are applied by default to the object. 2016Legacy & Prompt uses the V1 or \"74X\" regression while 2017 and 2018 use a modified version of the V2 or \"80X\" regression. This modification is that the high pt ecal training is only used for saturated electrons and photons.","title":"Electron and Photon Energy Regression Corrections"},{"location":"Run2/#residual-scale-smearing-corrections","text":"The data / MC energy rescale and resolution have a small residual miss match. Therefore we scale the data to the MC and the smear the MC to match the data resolution. This is known as scale & smearing corrections. The scale and smear corrected energy can be accessed inside the miniAOD object via pat::Electron::userFloat('ecalTrkEnergyPostCorr\"), pat::Photon::userFloat('ecalEnergyPostCorr'). Some analyses use the ECAL only energy of electrons and therefore use pat::Electron::userFloat('ecalEnergyPostCorr'). Currently, these final corrections are only availible for 2016 and 2017, although preliminary ones are now availible 2018 Preliminary Energy Correction To access the scale and smearings please see EgammaMiniAODV2#Energy_Scale_and_Smearing","title":"Residual Scale &amp; Smearing Corrections"},{"location":"Run2/#recommendations-on-combining-systematics-between-years","text":"What follows are some simple recommendations on correlating the systematics between the years which we feel are a resonable starting point. The method for deciding the correlation depends on whether the quantity is measured in its kinematic phase space or extrapolated its kinematic phase space. The systematic uncertainty of a measured value is dominated by biases associated with the measurement method. As long as the method remains the same, we can reasonably assume that the method bias will be the same each year. The systematic uncertainty of an extrapolated value is dominated by the modelling of that extrapolation by the Monte Carlo simulation and can change between years if new cuts, new variables or new detectors are introduced. We absolutely encourage feedback here and will update the recommendations based on this. trigger efficiency: uncertainties are negligible w.r.t to reco & ID unless there are bugs RECO efficiency: uncertainties are correlated between the years as they are measured with the same method due to the larger backgrounds, we assume the RECO uncertainties are uncorrelated w.r.t to the ID uncertainties ID efficiency 20 to 200 GeV (near the Z peak): small stat errors, systematics dominate. This is a measurement and given the method doesnt change, its 100% correlated between the years >200 GeV: extrapolation based on confidence of the Monte Carlo simulation capturing the energy evolution of the ID variables we decided 100% correlated between 2016 & 2017. A 50 GeV electron looks a lot like a 1 TeV electron pixel wise so any differences are already accounted for. Any energy disagrement would come from something else which is constant between the two years it is yet unclear if 2018 is correlated or uncorrelated due to the HCAL endcap upgrade UPDATE as of 14th Dec, 2020: Since most of the variables are ECAL related, we suggest to treat the ID systematics correlated between all the years unless there are strong points against it. conversion safe electron veto: as this is arguably an extrapolation, we uncorrelate 2016, 2017 and 2018 due to the different pixel detector / pixel running conditions between the years energy scale: the errors are: stat, systematic, gain stat: neglibible and can be ignored syst: a measurement, correlated between the years gain: the error on the gain category mostly coming from the statistics of each gain category electrons and therefore it can be taken to be uncorrelated between the years. Really only important for gain1 which are our highest energy electrons. Also helps that 2016 and 2017 have different energy regressions which may be modelled differently in MC so they really should be uncorrelated. energy resolution: the errors are correlated between the years as they are a measurement and the same method is used in all years","title":"Recommendations on Combining Systematics between years"},{"location":"Run2/#summary-of-available-egamma-pog-ntuples","text":"2016 Rereco version: /*/Run2016*17Jul2018 / (legacy rereco) MC samples: /*/*RunIISummer16MiniAODv3 / egamma ntuples: /eos/cms/store/group/phys_egamma/soffi/TnP/ntuples_04162018-Legacy2016 Regression: PF/SC/Egamma 74X /74X/74X trained Scale and smearing: embedded in MiniAOD V2 JSON: Cert_271036-284044_13TeV_23Sep2016ReReco_Collisions16_JSON.txt 2017 Rereco version: /*/Run2017*31Mar2018 / MC samples: /*/*12Apr2018 / egamma ntuples: /eos/cms/store/group/phys_egamma/soffi/TnP/ntuples_01162018/Moriond18_V1 egamma ntuples with same tag but additional variables: /eos/cms/store/group/phys_egamma/micheli/TnP/ntuples_2017_20181116 Regression: PF/SC/Egamma 94X /74X/80X trained Scale and smearing: embedded in MiniAOD V2 JSON: Cert_294927-306462_13TeV_PromptReco_Collisions17_JSON.txt 2018 Rereco version: / /17Sep2018 (for A-C), promptReco (for D)/ MC samples: /*/*RunIIAutumn18DRPremix -102X_upgrade2018_realistic / egamma ntuples:/eos/cms/store/group/phys_egamma/swmukher/NtupleForRecoSF/Rereco2018Data_Autumn18MC_AOD Regression: PF/SC/Egamma 74X /74X/74X trained Scale and smearing: embedded in MiniAOD V2 JSON: Cert_314472-325175_13TeV_PromptReco_Collisions18_JSON.txt","title":"Summary of available Egamma POG ntuples"},{"location":"Run3_ID/","text":"New Page for EgammaIDRecipesRun3 Persons involved: ... Object WP Person Status Photon Cut Based Shubham Dutta, SINP Work in Progress ^ MVA Based Prasant Rout, SINP Work in Progress Electron Cut Based Pei-Rong Yu, NTU Work in Progress ^ MVA Based Saba Taj, NCU Work in Progress PF EGamma ID MVA Based Anshul Kapoor, CAS Work in Progress -- Main.AnshulKapoor - 2020-12-01","title":"Person Power"},{"location":"Tools/","text":"The tag and probe method: The POG used the tag and probe method to perform various efficiency measurments. You can find the links below for tools to produce trees for the tag and probe studies and the official tool to measure the efficiencies. Tag&Probe Tree Producer Tag&Probe Package The ID Trainer: Starting from flat ntuples (even Nano AODs),one can use the ID Trainer to develop MVA IDs using BDT or DNN. ID-Trainer","title":"Tools"}]}